"0","library(R.matlab)"
"0","library(dplyr)"
"0","library(randomForest)"
"0",""
"0","# --- 1. Load Structural (1065 Subjects) ---"
"0","s_data <- readMat(""Data/TNPCA_Result/TNPCA_Coeff_HCP_Structural_Connectome.mat"")"
"0","# Get number of subjects dynamically"
"0","n_subs_struct <- length(s_data$sub.id)"
"0","s_coeffs <- matrix(s_data$PCA.Coeff, nrow = n_subs_struct, ncol = 60)"
"0","colnames(s_coeffs) <- paste0(""Struct_PC"", 1:60)"
"0","df_struct <- data.frame(Subject = as.vector(s_data$sub.id), s_coeffs)"
"0",""
"0","# --- 2. Load Functional (1058 Subjects) ---"
"0","f_data <- readMat(""Data/TNPCA_Result/TNPCA_Coeff_HCP_Functional_Connectome.mat"")"
"0","# Get number of subjects dynamically (It is 1058, not 1065)"
"0","n_subs_func <- length(f_data$network.subject.ids)"
"0","f_coeffs <- matrix(f_data$PCA.Coeff, nrow = n_subs_func, ncol = 60)"
"0","colnames(f_coeffs) <- paste0(""Func_PC"", 1:60)"
"0","df_func <- data.frame(Subject = as.vector(f_data$network.subject.ids), f_coeffs)"
"0",""
"0","# --- 3. Merge Everything ---"
"0","traits1 <- read.csv(""Data/traits/table1_hcp.csv"")"
"0","traits2 <- read.csv(""Data/traits/table2_hcp.csv"")"
"0",""
"0","# Inner join will automatically keep only the subjects present in ALL files"
"0","# This results in the intersection (1058 subjects)"
"0","mega_data <- inner_join(traits1, traits2, by = ""Subject"") %>%"
"0","             inner_join(df_struct, by = ""Subject"") %>%"
"0","             inner_join(df_func, by = ""Subject"")"
"0",""
"0","print(paste(""Mega Dataset Loaded. Rows:"", nrow(mega_data), ""| Features:"", ncol(mega_data)))"
"1","[1]"
"1"," ""Mega Dataset Loaded. Rows: 1058 | Features: 893"""
"1","
"
"0","write.csv(mega_data, ""Data/full_data.csv"")"
